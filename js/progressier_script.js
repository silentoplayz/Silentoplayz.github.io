var progressier;if(!("progressier"in window)){window.progressier=progressier}progressier=new ProgressierObj;function ProgressierObj(){try{var t=this;this.debug=function(){return window.location.href.includes("ddbug=true")};window.addEventListener("beforeinstallprompt",function(e){if(t.debug()){console.log(e)}e.preventDefault();t.nativePrompt=e});this.script=document&&document.currentScript&&document.currentScript.getAttribute("src")&&document.currentScript.getAttribute("src")?document.currentScript.getAttribute("src"):null;if(!t.script){throw"Progressier Error: Couldn't retrieve currentScript. You may be using a browser that's incompatible with Progressier"}this.appId=new URL(t.script).searchParams.get("id");if(!t.appId){throw"Progressier Error: Missing app ID. The URL of the client script must include ?id={yourAppId}"}this.fetchdomain=new URL(t.script).origin;this.wording=new ProgressierWording;this.domain=window.location.origin;this.theme=new ProgressierTheme;this.integrations=new ProgressierIntegrations;this.cookies=new ProgressierCookies(t);this.utils=new ProgressierUtils(t);this.data=new ProgressierData(t);this.manifest=new ProgressierManifest(t);this.sw=new ProgressierSw(t);this.native=new ProgressierNative(t);this.user=new ProgressierUser(t);this.analytics=new ProgressierAnalytics(t);this.installbuttons=new ProgressierInstallButtons(t);this.promote=t.native.promote;this.meta=new ProgressierMeta(t);this.push=new ProgressierPushNotifications(t);this.subscribe=t.push.prompt;this.add=t.user.add;this.toolbox=new ProgressierWidget(t);this.engagement=new ProgressierEngagement(t);this.install=async function(){await t.toolbox.manualInstall()}}catch(e){console.log(e)}}function ProgressierWording(){var t=this;this.supportedLanguages=["en","fr","es","ru","uk","it","pt"];this.strings={install:{en:"Install",fr:"Installer",es:"Instalar app",ru:"Установить",uk:"Встановити",it:"Installa",pt:"Instalar",max:15},installed:{en:"Installed",fr:"Installé",es:"App instalada",ru:"Установлено",uk:"Встановлено",it:"Installata",pt:"Instalado",max:15},subscribed:{en:"Subscribed",fr:"Abonné",es:"Suscrito/a",ru:"Подписаны",uk:"Підписані",it:"Sottoscritto",pt:"Inscrito",max:15},getNotified:{en:"Get notified",fr:"Être notifié",es:"Notificarme",ru:"Получить уведомление",uk:"Отримати сповiщення",it:"Ricevi notifiche",pt:"Notificar-me",max:15},installs:{en:"Installs",fr:"Installations",es:"Instalaciones",ru:"Установка",uk:"Встановлюється",it:"Installazioni",pt:"Instalações",max:15},clickOn:{en:"Click on ",fr:"Cliquez sur ",es:"Haz clic en ",ru:"Нажмите на ",uk:"Натисніть на ",it:"Clicca su ",pt:"Clique em ",max:25},tapOn:{en:"Tap on ",fr:"Appuyez sur ",es:"Toca en ",ru:"Нажать на ",uk:"Натисніть ",it:"Tap su ",pt:"Toque em ",max:25},availableOnHomeScreen:{en:"Open the app from your home screen/desktop.",fr:"Ouvrez l'appli depuis votre bureau/écran d'accueil.",es:"Abre la app desde tu pantalla de inicio / escritorio.",ru:"Откройте приложение с домашнего экрана/рабочего стола.",uk:"Відкрийте програму з головного екрану/робочого столу.",it:"Apri l'app dalla tua Schermata Home o dal tuo Desktop.",pt:"Abra o aplicativo na sua tela inicial ou área de trabalho.",max:65},addToHomeScreen:{en:"Add to Home Screen",fr:"Ajouter à l'écran d'accueil",es:"Agregar a Inicio",ru:"Добавить на домашний экран",uk:"Додати на головний екран",it:"Aggiungi alla Schermata Home",pt:"Adicionar à tela inicial",max:30},select:{en:"Select",fr:"Sélectionnez",es:"Selecciona",ru:"Выбрать",uk:"Оберіть",it:"Seleziona",pt:"Selecione",max:20},allowNotifications:{en:"Get notifications",fr:"Recevoir des notifications",es:"Permitir notificaciones",ru:"Получать уведомления",uk:"Отримувати сповіщення",it:"Ricevi notifiche",pt:"Receber notificações",max:40},pushPromoDefault:{en:"We'd like to send you notifications. Subscribe to never miss any updates. We won't spam you.",fr:"Nous aimerions vous envoyer des notifications. Souscrivez pour ne rien manquer. Garanti sans spam.",es:"Nos gustaría enviarte notificaciones. Suscríbete para no perderte ninguna actualización. No te enviaremos spam.",ru:"Мы хотим отправлять вам уведомления. Подпишитесь, чтобы не пропустить никаких обновлений. Мы не будем спамить вам.",uk:"Ми хотіли б надсилати Вам сповіщення. Підпишіться, щоб ніколи не пропускати жодних оновлень. Ми не будемо спамувати Вас.",it:"Vorremmo inviarti delle notifiche. Sottoscrivi per essere sempre aggiornato: non ti invieremo spam.",pt:"Gostaríamos de enviar notificações para você. Inscreva-se para nunca perder nenhuma atualização. Não vamos enviar spam para você.",max:150},appInstallPromoDefault:{en:"Install the app on your device to easily access it anytime. No app store. No download. No hassle.",fr:"Installez l'appli sur votre appareil pour y accéder a tout moment. Aucun téléchargement nécessaire.",es:"Instala la app en tu dispositivo para acceder fácilmente en cualquier momento. No se requiere descarga.",ru:"Установите приложение на свое устройство, чтобы легко получить к нему доступ в любое время. Без магазина приложений. Без скачивания. Никаких хлопот.",uk:"Встановіть програму на свій пристрій, щоб легко отримати доступ до неї в будь-який час. Без магазину додатків. Без завантаження. Ніяких клопотів.",it:"Installa l'app sul tuo dispositivo per accedervi facilmente in qualsiasi momento. Nessun app store. Nessuna app da scaricare. Zero fastidi.",pt:"Instale o aplicativo em seu dispositivo para acessá-lo facilmente a qualquer momento. Nenhuma app store. Sem download. Sem problemas.",max:150},proTipNotifications:{en:"Pro tip: if you're not prompted to allow notifications right now, open permissions in the URL bar and allow notifications manually.",fr:"Conseil de pro : si vous n'êtes pas invité à autoriser les notifications immédiatement, ouvrez les autorisations dans la barre d'URL et autorisez-les manuellement.",es:"Consejo profesional: si no se te solicita permitir las notificaciones en este momento, abre los permisos en la barra de URL y permite las notificaciones manualmente.",ru:"Совет от профессионалов: если вам не предлагается разрешить уведомления прямо сейчас, откройте разрешения в строке URL и разрешите уведомления вручную.",uk:"Порада професіонала: якщо Вам не запропоновано дозволити сповіщення прямо зараз, відкрийте дозволи у рядку URL-адреси та дозвольте сповіщення вручну.",it:"Suggerimento: se non ti viene chiesto di consentire le notifiche in questo momento, apri le autorizzazioni nella barra degli URL e consenti le notifiche manualmente.",pt:"Dica: se você não for solicitado a permitir notificações agora, abra as permissões na barra de URL e permita as notificações manualmente.",max:200}};this.language=function(){var e=(navigator.language||navigator.userLanguage||"en").toLowerCase();var i="";t.supportedLanguages.forEach(function(t){if(i){return}if(t===e||e.includes(t+"-")){i=t}});return i};this.get=function(e){var i=t.language();if(!t.strings[e]){throw"This textId does not exist"}return t.strings[e][i]||t.strings[e].en}}function ProgressierTheme(){var t=this;this.darkMode=window.matchMedia("(prefers-color-scheme: dark)").matches;this.fontFamily=`-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Ubuntu,sans-serif !important`;this.textColor=t.darkMode?"#ffffff":"#1a1a2b";this.menuColor=t.darkMode?"#3e3f44":"#eeeeee";this.elementColor=t.darkMode?"#313035":"#ffffff";this.borderColor=t.darkMode?"#0f0d0d":"#c9c9c9";this.linkColor=t.darkMode?"#ffffff":"#1a73e8";this.boxShadow=t.darkMode?`0 8px 10px 0 rgba(0,0, 0, 0.16), 0 8px 28px 0 rgba(0,0,0,0.25)`:`0 8px 10px 0 rgba(157, 157, 176, 0.16), 0 8px 28px 0 rgba(157, 157, 176, 0.25)`;this.backdrop=t.darkMode?"rgba(62, 63, 68, 0.78)":"rgba(27, 27, 59, 0.78)";this.hoverColor="rgba(0,0,0,0.1)"}function ProgressierIntegrations(){var t=this;this.syncUserDataFromChat={el:"input",name:"syncUserDataFromChat",label:"Sync user data with Progressier",type:"toggle",tooltip:"If enabled, user data from the chat (email and/or first name and/or last name) will be synced with Progressier when available so you can directly target users by email when sending push notifications in Progressier without any additional integrations."};this.hideNode=function(t){if(!t){return}var e=t.getAttribute("style")||"";if(e.includes("visibility:hidden")){return}var i=e+";opacity:0 !important;visibility:hidden !important;pointer-events:none !important;";t.setAttribute("style",i)};this.cssHide=function(t,e,i){var n=t+`{display:none !important;opacity:0 !important;}`;var a=i.querySelector("#"+e)||progressier.utils.node("style",{id:e,parent:i});a.innerHTML=n};this.list=[{name:"Intercom",value:"intercom",category:"Live chat",description:"Customize your messenger and make it work with the rest of your apps",notificationExample:5,onePerCategory:true,defaultBg:"#3047ec",premium:true,svg:`<svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 32" width="28" height="32"><path d="M28,32 C28,32 23.2863266,30.1450667 19.4727818,28.6592 L3.43749107,28.6592 C1.53921989,28.6592 0,27.0272 0,25.0144 L0,3.6448 C0,1.632 1.53921989,0 3.43749107,0 L24.5615088,0 C26.45978,0 27.9989999,1.632 27.9989999,3.6448 L27.9989999,22.0490667 L28,22.0490667 L28,32 Z M23.8614088,20.0181333 C23.5309223,19.6105242 22.9540812,19.5633836 22.5692242,19.9125333 C22.5392199,19.9392 19.5537934,22.5941333 13.9989999,22.5941333 C8.51321617,22.5941333 5.48178311,19.9584 5.4277754,19.9104 C5.04295119,19.5629428 4.46760991,19.6105095 4.13759108,20.0170667 C3.97913051,20.2124916 3.9004494,20.4673395 3.91904357,20.7249415 C3.93763774,20.9825435 4.05196575,21.2215447 4.23660523,21.3888 C4.37862552,21.5168 7.77411059,24.5386667 13.9989999,24.5386667 C20.2248893,24.5386667 23.6203743,21.5168 23.7623946,21.3888 C23.9467342,21.2215726 24.0608642,20.9827905 24.0794539,20.7254507 C24.0980436,20.4681109 24.0195551,20.2135019 23.8614088,20.0181333 Z" fill="currentColor"></path></svg>`,settings:[{el:"blockquote",html:`Intercom is a premium integration. If you're using Intercom on your site, you must get the add-on to enable the toolbox altogether. Once enabled, the Intercom Messenger will be placed in the toolbox automatically. The colors of the widget will match those you set up in <a href="https://app.intercom.com/a/apps/" target="_blank">your Intercom settings</a>.`}],exists:function(){return window.Intercom&&typeof window.Intercom==="function"},getColor:function(){if(!window||!window.getComputedStyle){return null}var t=document.querySelector(".intercom-lightweight-app-launcher-icon-open svg path");if(!t){return null}return window.getComputedStyle(t).fill},getBackground:function(){try{var t=localStorage.getItem("intercom.intercom-state");var e=JSON.parse(t);var i=e.app.color;if(i){return i}}catch(a){}try{if(!window||!window.getComputedStyle){return null}var n=document.querySelector(".intercom-lightweight-app-launcher");if(!n){return null}return window.getComputedStyle(n).backgroundColor}catch(a){}return null},hide:function(e){var i=".intercom-lightweight-app-launcher, .intercom-app > iframe, .intercom-launcher-badge-frame";e.querySelectorAll(i).forEach(function(e){t.hideNode(e)})},onInit:function(t){window.Intercom("onUnreadCountChange",function(e){t.unreadNotifications(e,true)});window.Intercom("onHide",t.onHide);window.Intercom("onShow",t.onShow)},maximize:function(){window.Intercom("show")},minimize:function(){window.Intercom("hide")}},{name:"Tawk.to",value:"tawkto",category:"Live chat",description:"Make your Tawk.to widget accessible from your toolbox",onePerCategory:true,notificationExample:3,defaultBg:"#03a84e",settings:[{el:"blockquote",html:`Once enabled, the Tawk.to widget will be placed in the toolbox automatically. The colors of the widget will match those you set up in your <a href="https://dashboard.tawk.to/#/admin/" target="_blank">Tawk.to settings</a>.`}],exists:function(){return window.Tawk_API&&window.Tawk_API.maximize},svg:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 800"><path d="M400 26.2c-193.3 0-350 156.7-350 350 0 136.2 77.9 254.3 191.5 312.1 15.4 8.1 31.4 15.1 48.1 20.8l-16.5 63.5c-2 7.8 5.4 14.7 13 12.1l229.8-77.6c14.6-5.3 28.8-11.6 42.4-18.7C672 630.6 750 512.5 750 376.2c0-193.3-156.7-350-350-350zm211.1 510.7c-10.8 26.5-41.9 77.2-121.5 77.2-79.9 0-110.9-51-121.6-77.4-2.8-6.8 5-13.4 13.8-11.8 76.2 13.7 147.7 13 215.3.3 8.9-1.8 16.8 4.8 14 11.7z" fill-rule="evenodd" clip-rule="evenodd" fill="currentColor"></path></svg>`,getBackground:function(){var t=document.querySelectorAll(`iframe[title="chat widget"]`);if(!t||t.length<1){return null}var e=null;t.forEach(function(t){if(e){return}try{e=t.contentWindow.document.body.querySelector(".theme-background-color")}catch(i){console.log(i);return}});if(!e){return null}var i=window.getComputedStyle(e);if(!i){return null}return i.backgroundColor},onInit:function(t){window.Tawk_API.onChatMaximized=t.onShow;window.Tawk_API.onChatMinimized=t.onHide;try{var e=setInterval(function(){var i=document.querySelector(`iframe[title="chat widget"]:nth-child(2)`);if(!i){return}var n=new MutationObserver(function(e,n){var a=(i.getAttribute("style")||"").includes("display: none");if(a){t.onHide()}});n.observe(i,{attributes:true});clearInterval(e)},300)}catch(i){}},hide:function(e){e.querySelectorAll('iframe[title="chat widget"][scrolling="no"]').forEach(function(e){if(e.clientWidth>=50&&e.clientWidth<=90){t.hideNode(e)}})},maximize:function(){try{window.Tawk_API.maximize()}catch(t){}},minimize:function(){try{window.Tawk_API.minimize()}catch(t){}}},{name:"Crisp",value:"crisp",category:"Live chat",description:"Start Crisp chats directly from your toolbox",onePerCategory:true,notificationExample:5,defaultBg:"#1972f5",settings:[{el:"blockquote",html:`Once enabled, the Crisp widget will be placed in the toolbox automatically. The colors of the widget will match those you set up in your <a href="https://app.crisp.chat/settings/website/" target="_blank">Crisp settings</a>.`},t.syncUserDataFromChat],exists:function(){return window.$crisp&&window.$crisp.push},svg:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="isolation:isolate" viewBox="0 0 35 30"><defs><clipPath id="_clipPath_kOZqAJ5ru9ujnT2TLyqM7QGr3PEj9YBh"><rect width="35" height="30"/></clipPath></defs><g clip-path="url(#_clipPath_kOZqAJ5ru9ujnT2TLyqM7QGr3PEj9YBh)"><path d=" M 13.777 23.979 L 2.404 25.276 L 0.542 5.9 L 32.447 2.222 L 34.309 21.622 L 23.265 22.883 L 19.14 29.625 L 13.777 23.968 L 13.777 23.979 Z " fill="currentColor"/></g></svg>`,getBackground:function(){try{var t=document.querySelector('.crisp-client *[data-id="chat_opened"]');t=document.querySelector("#crisp-chatbox > div > a > span:nth-child(2)");if(!t){return null}var e=t.parentNode;if(!e){return null}var i=window.getComputedStyle(t);if(!i){return null}if(!i.backgroundColor){return null}var n=i.backgroundColor.split(/[?,)(]/);var a=n[4];console.log(a);if(a===0||a==="0"){return null}return i.backgroundColor}catch(r){return null}},onInit:function(e){document.querySelectorAll('.crisp-client *[data-id="chat_opened"], #crisp-chatbox a').forEach(function(e){t.hideNode(e)});window.$crisp.push(["on","session:loaded",function(){document.querySelectorAll('.crisp-client *[data-id="chat_opened"], #crisp-chatbox a').forEach(function(e){t.hideNode(e)})}]);window.$crisp.push(["on","message:received",function(){e.unreadNotifications(window.$crisp.get("chat:unread:count"),true)}]);window.$crisp.push(["on","chat:closed",e.onHide]);window.$crisp.push(["on","chat:opened",function(){e.onShow();setTimeout(function(){e.unreadNotifications(window.$crisp.get("chat:unread:count"),true)},1e3)}]);window.$crisp.push(["on","user:email:changed",function(t){e.onUserData({email:t})}])},hide:function(e){e.querySelectorAll('.crisp-client *[data-id="chat_opened"], #crisp-chatbox a').forEach(function(e){t.hideNode(e)})},maximize:function(){window.$crisp.push(["do","chat:open"])},minimize:function(){window.$crisp.push(["do","chat:close"])}},{name:"Chaport",value:"chaport",category:"Live chat",description:"Make your Chaport widget accessible from your toolbox",onePerCategory:true,notificationExample:3,settings:[{el:"blockquote",html:`Once enabled, the Chaport widget will be placed in the toolbox automatically. The colors of the widget will match those you set up in your <a href="https://app.chaport.com/#/settings/appearance" target="_blank">Chaport settings</a>.`}],svg:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="isolation:isolate" viewBox="0 0 64 73" width="64pt" height="73pt"><defs><clipPath id="_clipPath_UZPxDfHsKl7nkiFgUpszkNkXoS7nidZ0"><rect width="64" height="73"/></clipPath></defs><g clip-path="url(#_clipPath_UZPxDfHsKl7nkiFgUpszkNkXoS7nidZ0)"><clipPath id="_clipPath_GCMeryH5yRx08pVlnad5wWCpjX3gJKKL"><rect x="0" y="0" width="64" height="73" transform="matrix(1,0,0,1,0,0)" fill="currentColor"/></clipPath><g clip-path="url(#_clipPath_GCMeryH5yRx08pVlnad5wWCpjX3gJKKL)"><g><path d=" M 46.875 3.375 L 15.667 3.329 C 8.666 3.508 5.186 7.863 4.167 15.333 L 4.396 45.604 C 3.833 52.542 7.583 57.792 15.417 58.958 L 37.419 59.275 C 40.034 59.152 42.639 59.924 45.203 61.561 L 59.75 69.083 L 59.438 16.781 C 59.25 9.938 55.797 3.648 46.875 3.375 Z  M 15.875 31.583 C 15.875 29.997 17.163 28.708 18.75 28.708 C 20.337 28.708 21.625 29.997 21.625 31.583 C 21.625 33.17 20.337 34.458 18.75 34.458 C 17.163 34.458 15.875 33.17 15.875 31.583 L 15.875 31.583 L 15.875 31.583 Z  M 24.5 31.583 C 24.5 29.997 25.788 28.708 27.375 28.708 C 28.962 28.708 30.25 29.997 30.25 31.583 C 30.25 33.17 28.962 34.458 27.375 34.458 C 25.788 34.458 24.5 33.17 24.5 31.583 L 24.5 31.583 L 24.5 31.583 Z  M 33.625 31.458 C 33.625 29.872 34.913 28.583 36.5 28.583 C 38.087 28.583 39.375 29.872 39.375 31.458 C 39.375 33.045 38.087 34.333 36.5 34.333 C 34.913 34.333 33.625 33.045 33.625 31.458 L 33.625 31.458 Z  M 42.625 31.708 C 42.625 30.122 43.913 28.833 45.5 28.833 C 47.087 28.833 48.375 30.122 48.375 31.708 C 48.375 33.295 47.087 34.583 45.5 34.583 C 43.913 34.583 42.625 33.295 42.625 31.708 Z " fill-rule="evenodd" fill="currentColor"/></g></g></g></svg>`,defaultBg:"#1e88e5",exists:function(){return window.chaport&&window.chaport.hideLauncher},getBackground:function(){var t=document.querySelector(".chaport-launcher-button");if(!t){return null}var e=window.getComputedStyle(t);if(!e){return null}return e.backgroundColor},getColor:function(){return"#ffffff"},onInit:function(t){try{var e=setInterval(function(){var i=document.querySelector(".chaport-container");if(!i){return}var n=new MutationObserver(function(e,n){if(i.classList.contains("chaport-collapsed")){t.onHide()}else{t.onShow()}});n.observe(i,{attributes:true});clearInterval(e)},300)}catch(i){}},hide:function(t){try{window.chaport.hideLauncher()}catch(e){}},maximize:function(t){try{window.chaport.open()}catch(e){}},minimize:function(){try{window.chaport.close()}catch(t){}}},{name:"UserWay",value:"userway",category:"Accessibility",description:"Add your UserWay widget accessibility to your toolbox",settings:[{el:"blockquote",html:`Once enabled, the UserWay widget will be placed in the toolbox automatically.`}],svg:`<svg class="progressier-userway-svg-icon", xmlns="http://www.w3.org/2000/svg" viewBox="0 0 63 63"><circle fill="currentColor" cx="31.49" cy="16.08" r="5.5" transform="translate(-2.14 26.98) rotate(-45)"/><path fill="currentColor" d="M47.62,22.28a88.73,88.73,0,0,1-32.25,0,1.63,1.63,0,0,0-1.92,1.32,1.64,1.64,0,0,0,1.32,1.92,92,92,0,0,0,10.92,1.34,2.62,2.62,0,0,1,2.42,2.93l-.32,2.75a54.14,54.14,0,0,1-3,12.67l-2,5.35a1.65,1.65,0,0,0,3.09,1.16v0l.49-1c1.6-3.41,3.09-6.9,4.45-10.43a.74.74,0,0,1,1.38,0c1.36,3.53,2.85,7,4.45,10.44l.51,1.09h0a1.64,1.64,0,0,0,1.48,1,1.6,1.6,0,0,0,.57-.11,1.64,1.64,0,0,0,1-2.12l-2-5.35a54.67,54.67,0,0,1-3-12.67l-.31-2.77a2.61,2.61,0,0,1,2.42-2.91,92.51,92.51,0,0,0,10.83-1.32,1.73,1.73,0,0,0,1.44-1.67A1.65,1.65,0,0,0,47.62,22.28Z"/><path fill="currentColor" d="M31.5,0A31.5,31.5,0,1,0,63,31.5,31.53,31.53,0,0,0,31.5,0Zm0,60A28.5,28.5,0,1,1,60,31.5,28.54,28.54,0,0,1,31.5,60Z"/></svg>`,defaultBg:"#0048ff",exists:function(){return window.UserWay&&window.UserWay.widgetOpen},getBackground:function(){var t=document.querySelector("#userwayAccessibilityIcon");if(!t){return null}var e=window.getComputedStyle(t);if(!e){return null}return e.backgroundColor},getColor:function(){return"#ffffff"},onInit:function(t){try{window.UserWay.iconVisibilityOff()}catch(e){}},hide:function(t){try{window.UserWay.iconVisibilityOff()}catch(e){}},maximize:function(t){try{window.UserWay.widgetOpen();var e=document.querySelector(".uwy");if(!e){return}var i=new MutationObserver(function(i,n){if(!e.classList.contains("uon")){t.onHide();n.disconnect()}});i.observe(e,{attributes:true})}catch(n){console.log(n)}},minimize:function(){try{window.UserWay.widgetClose()}catch(t){}}}];this.get=function(e){var i=t.list.find(function(t){return t.value===e});return i||{}};this.findCategories=function(){var e=[];t.list.forEach(function(t){if(!t.category){return}if(e.indexOf(t.category)>-1){return}e.push(t.category)});return e};this.find=function(e){var i=[];t.list.forEach(function(t){if(e&&e!==t.category){return}t.img=progressier.domain+"/assets/img/integrations/"+t.value+".png";i.push(t)});return i}}function ProgressierWidget(t){var e=this;this.parent=t;this.toolbox=null;this.init=async function(){var t=await e.parent.data.waitForData();e.toolbox=new ProgressierToolbox(t,e.parent.fetchdomain,document.querySelector("body"))};this.manualInstall=async function(){if(!progressier.native.installable&&!progressier.native.iOScompatible){return}if(e.toolbox.element){e.toolbox.open();e.toolbox.promptAppInstall()}e.parent.native.promote()};this.on=function(){e.toolbox.on()};this.off=function(){e.toolbox.off()};this.init()}function ProgressierToolbox(t,e,i,n){var a=this;this.parent=parent;this.data=t;this.className="progressier-widget";this.options=[];this.container=i;this.fetchdomain=e;this.totalNotifications=0;this.virtual=n||{};this.integrationNotifications=a.virtual.notificationObj||{};this.bg=progressier.theme.menuColor;this.textColor=progressier.theme.textColor;this.elementColor=progressier.theme.elementColor;this.borderColor=progressier.theme.borderColor;this.linkColor=progressier.theme.linkColor;this.boxShadow=progressier.theme.boxShadow;this.backdrop=progressier.theme.backdrop;this.hoverColor=progressier.theme.hoverColor;this.isOpen=false;this.offline=false;this.appId=progressier.appId;this.styling=`\n\t\t.`+a.className+` *{ font-family:`+progressier.theme.fontFamily+`;     letter-spacing: 0px !important;}\n\t\t.`+a.className+`.no-goals{transform:scale(0) !important;}\n\t\t.`+a.className+`.off, .`+a.className+`.off *{display:none !important;visibility:hidden !important;opacity:0 !important;}\n\t\t.`+a.className+`{ z-index: 9999999999999999999999999999999999999 !important; position: fixed;}\n\t\t.`+a.className+` {color:#1a1a2b;  }\n\t\t.`+a.className+`-icon{cursor:pointer;transition:all 0.3s ease-in-out;-webkit-transition:all 0.3s ease-in-out; z-index: 2147483003899;  bottom: 17px; right: 20px; width: 65px; height: 65px; border-radius: 50%;  display: flex; align-items:center;justify-content:center;position: fixed; background: #fff;box-shadow: 0 2px 9px 0 rgba(82, 79, 79, 0.15);-webkit-box-shadow:0 2px 9px 0 rgba(82, 79, 79, 0.15);}\n\t\t.`+a.className+`:not(.open) .`+a.className+`-icon:hover, .`+a.className+`-option:hover{transform:scale(1.08) !important;}\n\t\t.`+a.className+`-option-icon{display:flex;}\n\t\t.`+a.className+`-logo, .`+a.className+`-close{ width: 31px; height: 31px;transition:all 0.3s ease-in-out;-webkit-transition:all 0.3s ease-in-out;margin:0px !important;}\n\t\t.`+a.className+`-logo.full{width:100%;height:100%;border-radius:50%;overflow:hidden;}\n\t\t.`+a.className+`-logo:not(.full).light-text, .`+a.className+`-close:not(.full).light-text{filter:invert(1);}\n\t\t.`+a.className+`-logo:not(.full).dark-text, .`+a.className+`-close:not(.full).dark-text{opacity: 0.4;}\n\t\t.`+a.className+`-logo:active, \t.`+a.className+`-logo:hover{    transform: scale(0.8);}\n\t\t.`+a.className+`-close {display:flex;align-items:center;justify-content:center;}\n\t\t.`+a.className+`-close svg{width: 30px; height: 30px;}\n\t\t.`+a.className+`.open .`+a.className+`-logo{ display:none;}\n\t\t.`+a.className+`:not(.open) .`+a.className+`-close{ display:none;}\n\t\t.`+a.className+`-menu{background:`+(a.virtual.opened?`transparent`:a.backdrop)+`;position:fixed;top:0px;left:0px;width:100vw;height:100vh;}\n\t\t.`+a.className+`-menu-inner{  position: fixed;  bottom: 10px; right: 10px; border-radius: 25px;  background: `+a.bg+`;  box-shadow: `+a.boxShadow+`;-webkit-box-shadow: `+a.boxShadow+`;overflow:hidden;    min-width: 350px;/*transition:all 0.7s ease-in-out;-webkit-transition:all 0.7s ease-in-out;*/}\n\t\t.`+a.className+`:not(.open) .`+a.className+`-menu-inner{ width: 65px;  height: 65px; overflow: hidden; min-width: 10px; bottom: 10px;  right: 10px;}\n\t\t.`+a.className+`-option{  margin: 7px 5px; width:65px; height: 65px; display: flex; align-items: center; justify-content: center; border-radius: 50%; flex: none; flex-wrap: wrap;  background: #ffffff; color: #fff; font-size: 35px;cursor:pointer;transition:all 0.3s ease-in-out;-webkit-transition:all 0.3s ease-in-out;box-shadow: 0 2px 9px 0 rgba(82, 79, 79, 0.15);-webkit-box-shadow: 0 2px 9px 0 rgba(82, 79, 79, 0.15);}\n\t\t.`+a.className+`-option:nth-child(4){transform:translate(0px, 0px) scale(1);}\n\t\t.`+a.className+`:not(.open) .`+a.className+`-option:nth-child(4){transform:translate(75px, 0px)}\n\t\t.`+a.className+`-option:nth-child(3){transform:translate(0px, 0px) scale(1);}\n\t\t.`+a.className+`:not(.open) .`+a.className+`-option:nth-child(3){transform:translate(150px, 0px)}\n\t\t.`+a.className+`-option:nth-child(2){transform:translate(0px, 0px) scale(1);}\n\t\t.`+a.className+`:not(.open) .`+a.className+`-option:nth-child(2){transform:translate(225px, 0px)}\n\t\t.`+a.className+`-option:nth-child(1){transform:translate(0px, 0px) scale(1);}\n\t\t.`+a.className+`:not(.open) .`+a.className+`-option:nth-child(1){transform:translate(300px, 0px)}\n\t\t.`+a.className+`:not(.open) .`+a.className+`-menu{visibility: hidden;   z-index: -112222;  opacity: 0; pointer-events: none;}\n\t\t.`+a.className+`.hiding .`+a.className+`-icon{transform: scale(0.4); bottom: -14px; right: -14px;}\n\t\t.`+a.className+`-popup{    display: flex;  align-items: center;padding: 40px 0px;}\n\t\t.`+a.className+`-panel{ display: flex;  right: 0px; margin: 0px; padding-right: 80px; justify-content: flex-start; align-items: flex-start; border-top: 1px solid `+a.borderColor+`;padding-left:4px;}\n\t\t.`+a.className+`-popup-btns{display:flex;align-items:center;justify-content:flex-start;margin-left:-10px;}\n\t\t.`+a.className+`-popup-btns > button{max-width: 40vw; white-space:nowrap;overflow: hidden; text-overflow: ellipsis; text-align: left; justify-content: flex-start;padding:0px 10px 0px 10px !important;margin:0px !important;background:transparent !important;border:0px !important;outline:0px !important;color:`+a.linkColor+` !important;text-transform:uppercase;height: 30px;border-radius:0px;font-size:14px !important;text-decoration: none !important;box-shadow:none !important;}\n\t\t.`+a.className+`-popup-btns > button.disabled{opacity:0.4 !important;pointer-events:none !important;}\n\t\t.`+a.className+`-popup-btns > button:empty{display:none !important;}\n\t\t.`+a.className+`-popup-btns > button:first-child{margin-left:0px !important;}\n\t\t.`+a.className+`-popup-btns > button, .`+a.className+`-popup-btns > button *{color:`+a.linkColor+` !important;font-weight: 500 !important;cursor:pointer !important;}\n\t\t.`+a.className+`-popup-btns > button:hover{background:`+a.hoverColor+` !important;}\n\t\t.`+a.className+`-popup-installs{    font-size: 20px; font-weight: 500;  display: flex; flex-direction: column; align-items: center; justify-content: center; color: `+a.textColor+` !important; width: 50px; height: 50px; box-shadow: 0 2px 9px 0 rgba(82, 79, 79, 0.15);-webkit-box-shadow: 0 2px 9px 0 rgba(82, 79, 79, 0.15); border-radius: 10px; background: `+a.elementColor+` !important; outline: 0px !important; border:0px !important; text-decoration: none !important; padding:0px !important;position:relative;}\n\t\t.`+a.className+`-popup-installs *{line-height:20px;}\n\t\t.`+a.className+`-popup-installs > *:first-child{margin-top:6px;}\n\t\t.`+a.className+`-popup-installs:after{display:none !important;}\n\t\t.`+a.className+`-popup-installs:before{display:none !important;}\n\t\t.`+a.className+`[data-items="0"] .`+a.className+`-popup{ padding: 15px 0px; margin-right: 80px;  }\n\t\t.`+a.className+`-popup-logo{ display: flex; flex-direction: column; align-items: center; justify-content: center; color: #1a1a3b; width: 50px; height: 50px; box-shadow: 0 2px 9px 0 rgba(82, 79, 79, 0.15);-webkit-box-shadow: 0 2px 9px 0 rgba(82, 79, 79, 0.15);  border-radius: 10px;  background: #fff;position:relative;overflow:hidden;}\n\t\thtml body .`+a.className+` .`+a.className+`-option *{color:inherit !important;}\n\t\t.`+a.className+`-option.dark-text > *{color: #1a1a3b !important;}\n\t\t.`+a.className+`-option.light-text > *{color: #fff !important;}\n\t\t.`+a.className+`-popup-logo img{width:100%;height:100%;flex:none;}\n\t\t.`+a.className+`-popup-installs > *{color: `+a.textColor+` !important;}\n\t\t.`+a.className+`-popup-installs > *:not(:first-child){font-size:0.7em;}\n\t\t.`+a.className+`-popup-title{font-weight:500;font-size:16px;    max-width: 250px; overflow: hidden;  text-overflow: ellipsis;margin-bottom:5px;color:`+a.textColor+` !important;display:flex;align-items:center;}\n\t\t.`+a.className+`-popup-info{ margin-left: 20px;display:flex;align-items:center;justify-content:center;margin-right:20px;flex:none;}\n\t\t.`+a.className+`-popup-info > *{margin-right:5px;flex:none;}\t\t\n\t\t.`+a.className+`-popup-header{display:flex;align-items:center;    margin-top: 20px !important;}\n\t\t.`+a.className+`.in-app .`+a.className+`-menu{display:none;}\n\t\t.`+a.className+`-helper{padding:0px 20px;background: `+a.bg+`;top:0px;left:0px;width:100%;height:100%;z-index:9999;display:flex;align-items:flex-start;justify-content:center;flex-direction:column;max-width:400px;min-height:250px;}\n\t\t.`+a.className+`-helper *{ color:`+a.textColor+` !important;    line-height: 20px !important;     text-align: left !important;}\n\t\t.`+a.className+`-helper.post-install{align-items:center;padding:0px !important;}\n\t\t.`+a.className+`-helper.post-install .`+a.className+`-popup-title{margin:0px !important;}\n\t\t.`+a.className+`-helper > *{margin:8px; color:`+a.textColor+` !important;}\n\t\t.`+a.className+`-helper > *:last-child{margin-bottom:40px;}\n\t\t.`+a.className+`.helping .`+a.className+`-menu-inner > *:not(.`+a.className+`-helper){display:none;}\n\t\t.`+a.className+`-helper-img{width:80%;flex:none;box-shadow: 0 2px 9px 0 rgba(82, 79, 79, 0.15);-webkit-box-shadow: 0 2px 9px 0 rgba(82, 79, 79, 0.15);}\n\t\t.`+a.className+`-helper-hr{ height: 1px; width: 120%; margin-left: -10%; margin: 0px;  margin-left: -10%; background:`+a.borderColor+`;margin-top:10px;margin-bottom: 20px;}\n\t\t.`+a.className+`-helper-desc{font-size:14px; color:`+a.textColor+` !important;   padding-right:10%;}\n\t\t.`+a.className+`-helper-sub{font-size:14px;max-width:80%;color:`+a.textColor+` !important;}\n\t\t.`+a.className+`-share-icon{margin-left:5px;position:relative; box-shadow: 0 2px 9px 0 rgba(82, 79, 79, 0.15);-webkit-box-shadow: 0 2px 9px 0 rgba(82, 79, 79, 0.15);margin-right:5px;display:inline-flex;justify-content:center;align-items:center;width:27px;height:27px;border-radius:3px;background:#fff;font-size:16px;}\n\t\t.`+a.className+`-share-icon:before{content:"";background-image:url(`+a.fetchdomain+`/assets/img/share-apple.png?v=3);background-size: contain; position: absolute; width: 72%; height: 72%; display: flex;background-repeat: no-repeat;}\n\t\t.`+a.className+`-option svg{width:35px;height:35px;}\n\t\t.`+a.className+`-share-icon  > span {visibility:hidden;}\n\t\t.`+a.className+`-add-to{padding:0px 5px;box-shadow: `+a.shadow+`;-webkit-box-shadow: `+a.shadow+`;margin-right:5px;display:inline-flex;justify-content:center;align-items:center;height:27px;border-radius:3px;background:#fff;font-size:12px;white-space:nowrap;font-weight:600;}\n\t\t.`+a.className+`.offline .`+a.className+`-icon{filter: grayscale(1);background:#a6a6a6 !important;}\n\t\t.`+a.className+`.offline .`+a.className+`-icon *{color:#fff;}\n\t\t.`+a.className+`:not(.offline) *[data-notification]:after{content: attr(data-notification); padding: 5px; border-radius: 50%; position: absolute; top: 0px;  right: 0px; background: #f31c6c; width: 10px; height: 10px; display: flex; align-items: center; justify-content: center; font-size: 9px; font-weight: 700; color: #fff; letter-spacing:-0.5px;z-index:99999 !important;}\n\t\t.`+a.className+`.open .`+a.className+`-icon[data-notification]:after{display:none;}\n\t\t.`+a.className+`-embeds:empty{display:none;}\n\t\t.`+a.className+`-embeds:not(:empty){    border-top: 1px solid `+a.borderColor+`;}\n\t\t.`+a.className+`-embeds iframe{border:0px !important;outline:0px !important;width:100%;height:300px;max-height:30vh;}\n\t\t.`+a.className+`-embeds.xai iframe{width: 120%; height: 30vh; border: none; transform: scale(0.8); margin-left: -10%;margin-top:-25px;}\n\t\t.`+a.className+`-embeds.googledoc iframe{}\n\t\t.`+a.className+`-embeds.youtube iframe{ margin-bottom: -10px;}\n\t\t.`+a.className+`-links{display:flex;flex-direction:column;    padding: 10px 10px 20px 10px; border-top: 1px solid `+a.borderColor+`;    max-height: 40vh; overflow-y: auto; overflow-x:hidden !important;}\n\t\t.`+a.className+`-links:empty{display:none;}\n\t\t .`+a.className+`-link{   text-decoration:none !important;background: transparent !important;display:flex !important;align-items:center !important;justify-content:flex-start !important;margin:0px 0px !important;color:`+a.textColor+` !important;font-weight:500 !important;font-size:14px !important;padding:5px 10px !important;outline:0px !important;border:0px !important;flex:none !important;}\n\t\t .`+a.className+`-link > *{color: `+a.textColor+` !important;font-weight:400;}\n\t\t .`+a.className+`-link:hover{background:`+a.hoverColor+`  !important;}\n\t\t .`+a.className+`-link img{width:20px !important;height:20px !important;margin-right:20px;padding:5px;border-radius:8px;`+(progressier.theme.darkMode?"filter: invert(1);":"")+`}\n\t\t .`+a.className+`-link:before,  .`+a.className+`-link:after{display:none !important;}\n\t\t .`+a.className+`-icon.attention{ animation: progressier-bloop 1s infinite;}\n\t\t .`+a.className+`-chrome-btn{background:#1a73e8 !important;color:#fff !important;font-size:12px !important;padding:7px 16px;border-radius:5px;font-weight:600 !important;margin:0px 5px !important;}\n\t\t .`+a.className+`-chrome-btn *{color:#ffffff !important;}\n\t\t .`+a.className+`-option .progressier-userway-svg-icon{width:48px;height:48px;}\n\t\t @keyframes progressier-bloop {  \n\t\t\t0% { transform: scale3d(1, 1, 1);  }\n\t\t\t30% { transform: scale3d(1.25, 0.75, 1); }\n\t\t\t40% { transform: scale3d(0.75, 1.25, 1);  }\n\t\t\t50% { transform: scale3d(1.15, 0.85, 1); }\n\t\t\t65% { transform: scale3d(.95, 1.05, 1); }\n\t\t\t75% { transform: scale3d(1.05, .95, 1); }\n\t\t\t100% { transform: scale3d(1, 1, 1); }\n\t\t}\n\t\t@media (min-width:991px){\n\t\t\thtml body .chaport-window{bottom:100px !important;}\n\t\t\t.crisp-client #crisp-chatbox > div > div:first-child{bottom:90px !important;}\n\t\t}\n\t\t@media (max-width:991px){\n\t\t \t.`+a.className+`-menu-inner{    min-width: unset; width: calc(100vw - 20px);}\n\t\t\t.`+a.className+`-icon, .`+a.className+`-option{width:60px;height:60px;}\n\t\t\t.`+a.className+`-icon, .`+a.className+`-option, \t.`+a.className+`-option * {font-size:25px !important;}\n\t\t\t.`+a.className+`-logo, .`+a.className+`-close{width:29px;height:29px;}\n\t\t\t.`+a.className+`-option svg, .`+a.className+`-close{width:30px;height:30px;}\n\t\t\t.`+a.className+`-panel{justify-content: flex-start;}\n\t\t\t.`+a.className+`-popup-title{    max-width: 50vw;}\t\t\t\n\t\t\t.`+a.className+`-helper{max-width:90vw;}\n\t\t\t.`+a.className+`-popup-installs > *:not(:first-child){transform:scale(0.9);}\n\t\t\t.`+a.className+`.in-app{z-index: 0 !important;}\n\t\t\t\n\t\t}\n\t\t@media (max-width:350px){\n\t\t\t.`+a.className+`-icon, .`+a.className+`-option{width:52px;height:52px;}\n\t\t\t.`+a.className+`-icon, .`+a.className+`-option, \t.`+a.className+`-option * {font-size:22px !important;}\n\t\t\t.`+a.className+`-logo, .`+a.className+`-close{width:25px;height:25px;}\n\t\t\t.`+a.className+`-option svg, .`+a.className+`-close{width:26px;height:26px;}\n\t\t\t.`+a.className+`-option{margin:7px 5px;}\n\t\t\t.`+a.className+`-popup-title{font-size:13px;margin-bottom:0px;}\n\t\t\t.`+a.className+`-popup-info{margin-left:10px;margin-right:10px;}\n\t\t\t.`+a.className+`-popup-btns > button{font-size:11px !important;}\n\t\t\t.`+a.className+`-popup-logo, .`+a.className+`-popup-installs{width:40px;height:40px;font-size:13px;}\n\t\t\t.`+a.className+`-link > span{font-size:12px;}\n\t\t\t\n\t\t}\n\t\t@media (max-height:750px){\n\t\t\t.`+a.className+`-links{max-height:35vh !important;}\n\t\t\t\n\t\t}\n\t\t@media (max-height:600px){\n\t\t\t.`+a.className+`-links{max-height:25vh !important;}\n\t\t}\n\t`;this.on=async function(){if(a.element){a.element.classList.remove("off")}};this.off=async function(){if(a.element){a.element.classList.add("off")}};this.promoteSomething=async function(){if(a.isOpen){return}if(a.data.promotePush){if(await progressier.push.eligible()){return a.promotePush()}}if(a.data.promoteInstall){if(progressier.native.installable||progressier.native.iOScompatible){return a.promoteAppInstall()}}};this.noPrompt=function(){return progressier.wording.get("proTipNotifications")};this.pushIcon=function(){return progressier.fetchdomain+`/assets/img/icons/bell.svg`};this.installIcon=function(){return progressier.fetchdomain+`/assets/img/icons/install.svg`};this.promotePush=function(){if(!a.icon){return}a.icon.setAttribute("data-notification",1);a.icon.classList.add("attention");a.icon.addEventListener("click",async function(){await progressier.utils.wait(200);a.helperOverlay(progressier.wording.get("getNotified"),a.data.pushPromo||progressier.wording.get("pushPromoDefault"),a.pushIcon(),progressier.fetchdomain+"/assets/img/notification-authorize-example.jpg",a.noPrompt());progressier.subscribe();progressier.engagement.setDecline()},{once:true})};this.promoteAppInstall=function(){if(!a.icon){return}a.icon.setAttribute("data-notification",1);a.icon.classList.add("attention");a.icon.addEventListener("click",async function(){await progressier.utils.wait(200);progressier.install();a.promptAppInstall();progressier.engagement.setDecline()},{once:true})};this.helperOverlay=function(t,e,i,n,r){a.element.classList.add("helping");document.querySelectorAll("."+a.className+"-helper").forEach(function(t){t.remove()});a.helper=progressier.utils.node("div",a.className+"-helper",{parent:a.inner});var o=progressier.utils.node("div",a.className+"-popup-header",{parent:a.helper});progressier.utils.node("div",a.className+"-popup-logo",{parent:o,html:`<img style="width:50%;height:50%;flex:none;" src="`+i+`" />`});progressier.utils.node("div",a.className+"-popup-title",{style:"margin-left:15px;",parent:o,html:t});progressier.utils.node("div",a.className+"-helper-hr",{parent:a.helper});if(e){progressier.utils.node("div",a.className+"-helper-desc",{parent:a.helper,html:e})}if(n){progressier.utils.node("img",a.className+"-helper-img",{alt:"additional instructions for "+t,parent:a.helper,src:n})}if(r){progressier.utils.node("div",a.className+"-helper-sub",{parent:a.helper,html:r})}};this.removeAllHelpers=function(){document.querySelectorAll("."+a.className+"-helper").forEach(function(t){t.remove()})};this.postInstall=function(){a.removeAllHelpers();a.helper=progressier.utils.node("div",a.className+"-helper post-install",{parent:a.inner,html:`<img style="width:60px;height:60px;flex:none;margin-bottom:20px;" src="`+progressier.fetchdomain+`/assets/img/checkmark-success-primary.svg?v=`+progressier.utils.randomId()+`" /><div class="`+a.className+`-popup-title">`+progressier.wording.get("installed")+`</div>`})};this.postPushApproved=function(){a.removeAllHelpers();if(!a.isOpen){return}a.helper=progressier.utils.node("div",a.className+"-helper post-install",{parent:a.inner,html:`<img style="width:60px;height:60px;flex:none;margin-bottom:20px;" src="`+progressier.fetchdomain+`/assets/img/checkmark-success-primary.svg?v=`+progressier.utils.randomId()+`" /><div class="`+a.className+`-popup-title">`+progressier.wording.get("subscribed")+`</div>`})};this.promptAppInstall=function(){var t=progressier.native.isIOS();var e=progressier.wording.get("install")+" "+a.data.name;var i=a.data.appInstallPromo||progressier.wording.get("appInstallPromoDefault");var n=a.installIcon();if(t){a.helperOverlay(e,`<div>`+i+`</div><div style="margin-bottom:15px;margin-top:25px;">1. `+progressier.wording.get("tapOn")+` <span class="`+a.className+`-share-icon"><span>p</span></span></div><div> 2. `+progressier.wording.get("select")+` <span class="`+a.className+`-add-to">`+""+`<span style="color:#1a1a3b !important;">`+progressier.wording.get("addToHomeScreen")+`</span></span></div></div>`,n)}else if(window.screen.width>991){a.helperOverlay(e,`<div>`+i+`</div><div style="margin-bottom:15px;margin-top:25px;">1. `+progressier.wording.get("clickOn")+` <span class="`+a.className+`-chrome-btn">`+progressier.wording.get("install")+`</span></div><div> 2. `+progressier.wording.get("availableOnHomeScreen")+`</div></div>`,n)}else{a.helperOverlay(e,`<div>`+i+`</div><div style="margin-top:30px !important;color:#fff !important;height:40px !important;"  class="progressier-install-button `+a.className+`-chrome-btn">`+progressier.wording.get("install")+`</div>`,n)}};this.notificationPrompt=function(){a.helperOverlay(progressier.wording.get("allowNotifications"),a.noPrompt(),a.pushIcon(),progressier.fetchdomain+"/assets/img/notification-authorize-example.jpg");progressier.subscribe()};this.compatiblePushNotifications=function(){if(progressier.native.isIOS()){return false}if(progressier.native.isSafari()){return false}return true};this.createInstallButton=function(t){progressier.utils.node("div","progressier-install-button",{"data-behavior":"disable",parent:t})};this.openChatWidget=function(t){var e=progressier.integrations.get(t);if(e&&e.exists()&&e.maximize){e.maximize({onHide:a.close})}a.element.classList.add("in-app")};this.closeChatWidget=function(t){var e=progressier.integrations.find();e.forEach(function(t){if(t&&t.minimize&&t.exists()){t.minimize({onShow:a.hide})}});a.element.classList.remove("in-app")};this.toggleChatWidget=function(t){if(a.element.classList.contains("in-app")){a.closeChatWidget(t)}else{a.openChatWidget(t)}};this.ready=function(){return new Promise(function(t,e){var i=setInterval(function(){var e=document.querySelector("body");if(!e){return}clearInterval(i);return t()},100)})};this.openClose=async function(){a.element.classList.remove("helping");a.render();if(a.isOpen){a.close()}else{a.open()}a.closeChatWidget();if(a.helper){a.helper.remove()}};this.make=async function(){var t=a.className;if(!a.isVirtual()&&!a.toolboxHasContent()){t+=" no-goals"}a.element=progressier.utils.node("div",t,{parent:a.container,"data-items":a.options.length});if(a.virtual.opened){a.open()}};this.isInstallableCompatible=function(){return progressier.native.compatible||progressier.native.iOScompatible};this.render=async function(){if(!a.element){return}a.element.innerHTML="";if(a.virtual.offline){a.offline=true}if(a.offline){a.element.classList.add("offline")}else{a.element.classList.remove("offline")}var t=a.data.icon520||a.data.icon512||progressier.utils.emptyLogo();var e=a.data.toolboxUseLogo;var i=a.data.toolboxIcon;var n=a.data.toolboxColor;var r=e||!i;var o=r?t:i;var s=a.data.promotePush;var l=a.data.promoteInstall;var c=a.data.themeColor;var p=a.data.totalInstalls;var u=a.data.installsMin;var d=n||c||"#ffffff";var f=progressierInstalls(p,u);var h=a.data.name;var m=progressier.utils.textIsDark(d)?"dark-text":"light-text";var g=r?"full":"not-full";a.icon=progressier.utils.node("div",a.className+"-icon",{background:d,parent:a.element});if(a.totalNotifications){a.icon.setAttribute("data-notification",a.totalNotifications)}if(a.offline){a.icon.innerHTML=progressier.utils.svg_offline();return}a.icon.addEventListener("click",a.openClose);progressier.utils.node("img",a.className+"-logo "+m+" "+g,{parent:a.icon,src:o});progressier.utils.node("img",a.className+"-close "+m,{parent:a.icon,src:a.fetchdomain+"/assets/img/icons/x.svg"});var v=progressier.utils.node("div",a.className+"-menu",{parent:a.element});a.inner=progressier.utils.node("div",a.className+"-menu-inner",{parent:v});var w=progressier.utils.node("div",a.className+"-popup",{parent:a.inner});var b=progressier.utils.node("div",a.className+"-popup-info",{parent:w});var x=20;var y=f?f.length:0;switch(y){case 2:x=20;break;case 3:x=19;break;case 4:x=18;break;case 5:x=16;break;case 6:x=14;break}var k=progressier.wording.get("installs");var N=10;if(k.length>10){N=7}if(k.length>13){N=6}if(f&&a.isInstallableCompatible()){progressier.utils.node("a",a.className+"-popup-installs",{target:"_blank",href:a.fetchdomain+"/verified-installs?id="+a.appId,parent:b,html:`<span style="font-size:`+x+`px;">`+f+`</span><span style="font-size: `+N+`px;">`+k+`</span>`})}progressier.utils.node("div",a.className+"-popup-logo",{parent:b,background:c,html:`<img src="`+t+`" />`});var I=progressier.utils.node("div",a.className+"-popup-content",{parent:w});progressier.utils.node("div",a.className+"-popup-title",{parent:I,html:h});var C=progressier.utils.node("div",a.className+"-popup-btns",{parent:I});if(l){var S=progressier.utils.node("button","progressier-install-button",{"data-allow-ios":true,"data-install":progressier.wording.get("install"),"data-behavior":"disable","data-installed":progressier.wording.get("installed"),"data-icons":false,parent:C});if(a.isVirtual()){S.innerHTML=progressier.wording.get("install")}S.addEventListener("click",a.promptAppInstall)}var P=progressier.utils.node("div",a.className+"-links",{parent:a.inner});a.renderLinks(P);var L=progressier.utils.node("div",a.className+"-embeds",{parent:a.inner});a.renderEmbeds(L);var M=progressier.utils.node("div",a.className+"-panel",{parent:a.inner});a.renderButtons(M);if(s){var A=await progressier.push.isSubscribed();if(a.compatiblePushNotifications()){progressier.utils.node("button",A?"disabled":"enabled",{parent:C,html:A?progressier.wording.get("subscribed"):progressier.wording.get("getNotified"),click:a.notificationPrompt})}}};this.specialEmbedFormat=function(t){var e={classname:""};var i=[{classname:"xai",includes:"x.ai/"},{classname:"youtube",includes:"youtube.com/embed/"},{classname:"youtube",includes:"player.vimeo.com"},{classname:"googledoc",includes:"docs.google.com/"}];i.forEach(function(i){var n=i.includes?t.includes(i.includes):false;if(n&&i.classname){e.classname=i.classname}});return e};this.renderLinks=function(t){if(!a.data.toolboxLinks||a.data.toolboxLinks.length<1){return}a.data.toolboxLinks.forEach(function(e){if(!e.url||!e.title||!e.icon){return}progressier.utils.node("a",a.className+"-link",{target:"_blank",href:e.url,parent:t,html:`<img src="`+e.icon+`" /><span>`+e.title+`</span>`})})};this.renderEmbeds=function(t){if(!a.data.embedUrl||!a.data.embedShow){return}var e=a.data.embedUrl;var i=a.specialEmbedFormat(e);var n=i.classname;if(n){t.classList.add(n)}progressier.utils.node("div",a.className+"-embed",{parent:t,html:`<iframe src="`+e+`" style="" scrolling="auto" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen> </iframe>`})};this.renderButtons=function(t){a.getOptions().forEach(function(e){var i=e.bg||a.data.toolboxColor||a.data.themeColor;var n=progressier.utils.textIsDark(i)?"dark-text":"light-text";var r=progressier.utils.node("div",a.className+"-option "+n,{parent:t});if(e.notifications){r.setAttribute("data-notification",e.notifications)}if(e.color){r.style.color=e.color}if(i){r.style.background=i}var o="";if(e.icon){o=`<i class="`+e.icon+`"></i>`}if(e.svg){o=e.svg}if(e.img){o=`<img src="`+e.img+`" />`}progressier.utils.node("div",a.className+"-option-icon",{html:o,parent:r,click:function(){a.toggleChatWidget(e.value)}})})};this.integrationEnabled=function(t){var e=a.data.enabledIntegrations||[];return e.indexOf(t)>-1};this.getIntegrations=function(t){var e=progressier.integrations.find();e.forEach(function(e){if(!a.integrationEnabled(e.value)&&a.isVirtual()){return}if(!e.exists){return}var i=e.exists();if(!i&&!a.isVirtual()){return}var n=e.getBackground&&!e.bg?e.getBackground():null;if(n){e.bg=n}var r=e.getColor&&!e.color?e.getColor():null;if(r){e.color=r}var o={name:e.name,svg:e.svg,click:e.maximize,value:e.value};if(e.defaultBg){o.defaultBg=e.defaultBg}if(e.color){o.color=e.color}if(e.bg){o.bg=e.bg}if(a.isVirtual()){o.bg=e.defaultBg}if(e.hide){e.hide(a.container)}o.notifications=a.integrationNotifications[e.value]||0;t.push(o)})};this.getOptions=function(){var t=[];a.getIntegrations(t);return t};this.unreadNotificationsUpdate=function(t,e,i){var n=0;if(!i){t+=a.integrationNotifications[e]||0}a.integrationNotifications[e]=parseInt(t);for(var r in a.integrationNotifications){if(a.integrationNotifications.hasOwnProperty(r)){n+=a.integrationNotifications[r]}}a.totalNotifications=n;a.render()};this.userDataChange=function(t){if(typeof t!=="object"){return}if(!a.data.syncUserDataFromChat){return}progressier.add(t)};this.initAllIntegrations=function(){var t=progressier.integrations.find();setInterval(function(){t.forEach(function(t){if(!a.integrationEnabled(t.value)&&a.isVirtual()){return}if(!t.exists){return}if(t.hide){t.hide(a.container)}if(t.initialized){return}var e=t.exists();if(!e){return}if(!t.onInit){return}t.onInit({unreadNotifications:function(e,i){a.unreadNotificationsUpdate(e,t.value,i)},onHide:function(){a.close()},onShow:function(){a.makeIconClosing()},onUserData:a.userDataChange});t.initialized=true})},300)};this.close=async function(){a.element.classList.remove("open");a.isOpen=false};this.toolboxNothing=async function(){if(a.isVirtual()){return}var t=await a.toolboxHasNothingToShow();if(t){a.element.classList.add("no-goals")}else{a.element.classList.remove("no-goals")}};this.makeIconClosing=function(){a.isOpen=true;a.element.classList.add("in-app");a.element.classList.add("open")};this.open=function(){a.element.classList.add("open");a.isOpen=true};this.isVirtual=function(){return JSON.stringify(a.virtual)===JSON.stringify({})?false:true};this.needToShow=function(){if(a.isVirtual()){return true}if(!a.data.showToolbox){return false}return true};this.listenToOffline=function(){window.addEventListener("offline",function(t){a.offline=true;a.close();a.render()});window.addEventListener("online",function(t){a.offline=false;a.render()})};this.isUsingAPremiumIntegrationWithoutBeingPremium=function(){var t=false;if(a.isVirtual()){return t}var e=progressier.integrations.find();e.forEach(function(e){if(!e.premium){return}if(!e.exists||!e.exists()){return}if(a.data.enabledIntegrations.includes(e.value)){return}t=true;console.log("Your website is using "+e.name+". "+e.name+" is a premium integration. Get the add-on and enable the "+e.name+" integration to enable the toolbox altogether. If you have purchased the add-on, you must enable Intercom. More info here: "+progressier.fetchdomain+"/dashboard/toolbox-settings")});return t};this.toolboxHasContent=function(){if(a.data.enabledIntegrations&&a.data.enabledIntegrations.length>1){return true}if(a.data.embedShow&&a.data.embedUrl){return true}if(a.data.toolboxLinks&&a.data.toolboxLinks.length>0){return true}return false};this.toolboxHasNothingToShow=async function(){try{if(a.toolboxHasContent()){return false}var t=a.getOptions();if(t.length>0){return false}if(!progressier.native.isIOS()&&progressier.native.isSafari()){return true}if(!a.data.promotePush&&!a.data.promoteInstall){return true}var e=progressier.native.installed;if(e&&!a.data.promotePush){return true}var i=await progressier.push.isSubscribed();if(i&&!a.data.promoteInstall){return true}if(i&&e){return true}var n=a.compatiblePushNotifications();if(!n&&!a.data.promoteInstall){return true}if(!n&&e){return true}var r=progressier.native.compatible||progressier.native.iOScompatible;if(!r&&!a.data.promotePush){return true}if(!r&&i){return true}return false}catch(o){return false}};this.init=async function(){if(!a.needToShow()){return}await a.ready();if(a.isUsingAPremiumIntegrationWithoutBeingPremium()){return}a.initAllIntegrations();if(a.virtual&&a.virtual.notifications){a.totalNotifications=a.virtual.notifications}if(a.virtual&&a.virtual.totalInstalls){a.data.totalInstalls=a.virtual.totalInstalls}progressier.utils.styling(a.styling,a.className,a.container.ownerDocument);a.make();a.render();a.listenToOffline();if(a.virtual&&a.virtual.virtual&&a.virtual.promoting){a.icon.classList.add("attention")}if(!a.isVirtual()){setInterval(function(){a.toolboxNothing()},1e3)}};this.init()}function ProgressierMeta(t){var e=this;this.parent=t;this.data={};this.isIos=function(){return e.parent.analytics.o()};this.getData=async function(t){var i=await e.parent.data.get(t);return i||null};this.createMeta=function(t,i,n,a){if(document.querySelector(t+"["+i+'="'+n+'"]')){return}a[i]=n;a.parent=document.querySelector("head");e.parent.utils.node(t,a)};this.createAppleMeta=async function(){e.createMeta("meta","name","apple-touch-fullscreen",{content:"yes"});e.createMeta("meta","name","apple-mobile-web-app-capable",{content:"yes"});e.createMeta("meta","name","apple-mobile-web-app-status-bar-style",{content:"default"});var t=await e.getData("name");if(t){e.createMeta("meta","name","apple-mobile-web-app-title",{content:t})}};this.createAppleLogo=async function(){var t=await e.getData("icon520")||await e.getData("icon512");var i=await e.getData("themeColor");if(!t||!i){return}var n=new Image;n.onload=function(){var t=e.parent.utils.node("canvas",{width:180,height:180});var a=t.getContext("2d");a.fillStyle=i;a.fillRect(0,0,180,180);a.drawImage(n,0,0,180,180);var r=t.toDataURL();e.createMeta("link","rel","apple-touch-icon",{sizes:"180x180",href:r})};n.setAttribute("crossorigin","anonymous");n.src=t};this.createAppleSplashScreens=async function(){try{var t=await e.getData("icon520")||await e.getData("icon512");var i=await e.getData("themeColor");var n=[{orientation:"landscape",w:1024,h:1366,r:2},{orientation:"landscape",w:834,h:1194,r:2},{orientation:"landscape",w:834,h:1112,r:2},{orientation:"landscape",w:810,h:1080,r:2},{orientation:"landscape",w:768,h:1024,r:2},{orientation:"landscape",w:428,h:926,r:3},{orientation:"landscape",w:414,h:896,r:3},{orientation:"landscape",w:414,h:896,r:2},{orientation:"landscape",w:414,h:736,r:3},{orientation:"landscape",w:390,h:844,r:3},{orientation:"landscape",w:375,h:812,r:3},{orientation:"landscape",w:375,h:667,r:2},{orientation:"landscape",w:320,h:568,r:2}];var a=[];n.forEach(function(t){a.push(t);var e=JSON.parse(JSON.stringify(t));e.orientation="portrait";a.push(e)});a.forEach(async function(n){var a=.18;var r=n.orientation==="portrait"?true:false;n.imageWidth=(r?n.w:n.h)*n.r;n.imageHeight=(r?n.h:n.w)*n.r;if(r){n.innerHeight=parseInt(n.imageHeight*a);n.innerWidth=n.innerHeight}else{n.innerWidth=parseInt(n.imageWidth*a);n.innerHeight=n.innerWidth}n.top=parseInt((n.imageHeight-n.innerHeight)/2);n.left=parseInt((n.imageWidth-n.innerWidth)/2);e.createAppleSplashScreen(n,t,i)})}catch(r){console.log(r)}};this.createAppleSplashScreen=async function(t,i,n){try{var a=document.querySelectorAll(`link[rel="apple-touch-startup-image"]`);if(a&&a.length>0){var r=false;var o=a.forEach(function(e){if(r){return}var i=e.getAttribute("media");if(i&&i.includes(t.w+"px")&&i.includes(t.h+"px")&&i.includes(t.r)&&i.includes(t.orientation)){r=true}});if(r){return}}var s=new Image;s.onload=function(){var i=t.imageWidth;var a=t.imageHeight;var r=e.parent.utils.node("canvas",{width:i,height:a});var o=r.getContext("2d");o.fillStyle=n;o.fillRect(0,0,i,a);o.drawImage(s,t.left,t.top,t.innerWidth,t.innerHeight);var l=r.toDataURL();var c="screen and (device-width: "+t.w+"px) and (device-height: "+t.h+"px) and (-webkit-device-pixel-ratio: "+t.r+") and (orientation: "+t.orientation+")";e.parent.utils.node("link",{rel:"apple-touch-startup-image",media:c,href:l,parent:document.querySelector("head")})};s.setAttribute("crossorigin","anonymous");s.src=i}catch(l){console.log(l)}};this.createAndroidMeta=async function(){var t=await e.getData("themeColor");e.createMeta("meta","name","mobile-web-app-capable",{content:"yes"});e.createMeta("meta","name","theme-color",{content:t})};this.getStartUrl=async function(){var t=window.location.origin;var i=await e.getData("startUrl");var n=i?t+"/"+i:t;var a=await e.getData("dynamicStartUrl");if(a){n=window.location.href}return n};this.createMsMeta=async function(){var t=await e.getStartUrl();var i=await e.getData("shortName");var n=await e.getData("themeColor");var a=await e.getData("icon512");if(i){e.createMeta("meta","name","application-name",{content:i})}if(t){e.createMeta("meta","name","msapplication-starturl",{content:t})}if(n){e.createMeta("meta","name","msapplication-navbutton-color",{content:n})}if(a){e.createMeta("meta","name","msapplication-TileImage",{content:a})}if(n){e.createMeta("meta","name","msapplication-TileColor",{content:n})}};this.createMiscMeta=async function(){var t=await e.getStartUrl();e.createMeta("meta","name","x5-fullscreen",{content:"true"});e.createMeta("meta","name","x5-page-mode",{content:"app"});e.createMeta("meta","name","browsermode",{content:"application"});e.createMeta("meta","name","full-screen",{content:"yes"});e.createMeta("meta","property","al:web:url",{content:t})};this.init=async function(){await e.createMiscMeta();await e.createAndroidMeta();await e.createMsMeta();await e.createAppleMeta();await e.createAppleLogo();await e.createAppleSplashScreens()};this.init()}function ProgressierManifest(t){var e=this;this.parent=t;this.id=e.parent.data.id;this.init=function(){var t="sitemanifest.json";var i=window.btoa(window.location.href);var n=document.querySelector(`link[rel="manifest"]`);if(n){console.log("Your app already has an app manifest. If you'd like to use the one automatically generated by Progressier, please delete the one in your code first.");return}e.parent.utils.node("link",{rel:"manifest",href:e.parent.fetchdomain+"/client/"+t+"?id="+e.id+"&o="+i,parent:document.querySelector("head")})};this.init()}function progressierInstalls(t,e){var i=t&&t>0&&(t>e||!e);if(!i){return null}var n=[100,200,500,1e3,2e3,5e3,1e4,2e4,5e4,1e5,2e5,5e5,1e6,2e6,5e6,1e7,2e7,5e7,1e8,2e8,5e8,1e9,2e9,5e9];n.reverse();var a=null;n.forEach(function(e){if(a){return}if(t>e){a=e}});if(!a){return null}return progressier.utils.shortenNb(a)}function ProgressierAnalytics(t){var e=this;this.parent=t;this.appId=function(){return e.parent.data.id};this.domain=function(){return e.parent.fetchdomain};this.viewRegistered=false;this.compatibleViewRegistered=false;this.installedViewRegistered=false;this.overlayViewRegistered=false;this.installRegistered=false;this.c=function(){return e.parent.native.compatible};this.a=function(){return e.parent.native.installed};this.f=function(){return e.parent.native.standalone};this.m=function(){return e.parent.utils.isMobile()};this.o=function(){return e.parent.native.isIOS()};this.n=function(){return/android/i.test(navigator.userAgent.toLowerCase())};this.w=function(){return navigator.userAgent.indexOf("Win")>-1};this.s=function(){return!e.o()&&navigator.userAgent.indexOf("Mac")>-1};this.h=function(){var t=false;var e=window.chrome;var i=window.navigator;var n=typeof window.opr!=="undefined";var a=i.userAgent.indexOf("Edge")>-1;var r=i.userAgent.match("CriOS");if(r||e!==null&&typeof e!=="undefined"&&i.vendor==="Google Inc."&&n===false&&a===false){t=true}return t};this.registerButtonClick=function(){e.register({b:true})};this.registerPushSubscription=function(){if(e.pushSubscriptionRegistered){return}e.pushSubscriptionRegistered=true;e.register({e:true})};this.registerOverlayView=function(){if(e.overlayViewRegistered){return}e.overlayViewRegistered=true;e.register({p:true})};this.registerInstall=function(){if(e.installRegistered){return}e.installRegistered=true;var t={i:true};if(e.o()){t.z=true}if(e.n()){t.y=true}if(e.w()){t.x=true}if(e.s()){t.u=true}if(e.h()){t.t=true}e.register(t)};this.registerView=function(){if(e.viewRegistered){return}e.viewRegistered=true;var t={v:true};if(e.a()){t.a=true}if(e.m()){t.m=true}if(e.o()){t.o=true}if(e.n()){t.n=true}if(e.w()){t.w=true}if(e.s()){t.s=true}if(e.f()){t.f=true}if(e.h()){t.h=true}e.register(t)};this.registerCompatibleView=function(){if(e.compatibleViewRegistered){return}e.compatibleViewRegistered=true;if(!e.c()){return}e.register({c:true})};this.registerInstalledView=function(){if(e.installedViewRegistered){return}e.installedViewRegistered=true;if(!e.a()){return}e.register({a:true})};this.register=async function(t){await e.parent.utils.lets("POST",e.domain()+"/analytics/collect?id="+e.appId(),t)};e.registerView()}function ProgressierUtils(){var t=this;this.isMobile=function(){return screen.width<991&&screen.height>screen.width};this.emptyLogo=function(){return`data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgc3R5bGU9ImJhY2tncm91bmQ6ICAwJSAwJSAvIDQwMCUgNDAwJSByZ2IoMjM2LCAyMzYsIDIzNik7IHdpZHRoOiAxMDBweDsgaGVpZ2h0OiAxMDBweDsgYm9yZGVyLXJhZGl1czogMHB4OyI+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeT0iNTAlIiB4PSI1MCUiIGR5PSIwLjM1ZW0iIHBvaW50ZXItZXZlbnRzPSJhdXRvIiBmaWxsPSIjZmZmZmZmIiBmb250LWZhbWlseT0iSGVsdmV0aWNhTmV1ZS1MaWdodCxIZWx2ZXRpY2EgTmV1ZSBMaWdodCxIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsIEFyaWFsLEx1Y2lkYSBHcmFuZGUsIHNhbnMtc2VyaWYiIHN0eWxlPSJmb250LXdlaWdodDogNDAwOyBmb250LXNpemU6IDYwcHg7Ij4/PC90ZXh0Pjwvc3ZnPg==`};this.urlBase64ToUint8Array=function(t){var e="=".repeat((4-t.length%4)%4);var i=(t+e).replace(/\-/g,"+").replace(/_/g,"/");var n=window.atob(i);var a=new Uint8Array(n.length);for(var r=0;r<n.length;++r){a[r]=n.charCodeAt(r)}return a};this.wait=function(t){return new Promise(function(e,i){setTimeout(function(){return e()},t)})};this.svg_x=function(){return`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>`};this.svg_offline=function(){return`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-wifi-off"><line x1="1" y1="1" x2="23" y2="23"></line><path d="M16.72 11.06A10.94 10.94 0 0 1 19 12.55"></path><path d="M5 12.55a10.94 10.94 0 0 1 5.17-2.39"></path><path d="M10.71 5.05A16 16 0 0 1 22.58 9"></path><path d="M1.42 9a15.91 15.91 0 0 1 4.7-2.88"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line></svg>`};this.svg_back=function(){return`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>`};this.svg_star=function(){return`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>`};this.svg_check=function(){return`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check"><polyline points="20 6 9 17 4 12"></polyline></svg>`};this.svg_plus=function(){return`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>`};this.randomId=function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";var e="";for(var i=0;i<15;i++){e+=t.substr(Math.floor(Math.random()*t.length),1)}return e};this.textIsDark=function(t){var e=t.charAt(0)==="#"?t.substring(1,7):t;var i=parseInt(e.substring(0,2),16);var n=parseInt(e.substring(2,4),16);var a=parseInt(e.substring(4,6),16);var r=150;var o=i*.299+n*.587+a*.114;var s=o>r?true:false;return s};this.styling=function(e,i,n){var a=n||document;var r=a.getElementById(i)||t.node("style",{id:i,parent:a.querySelector("body")});r.innerHTML=e};this.lets=async function(t,e,i,n){if(t!=="GET"&&t!=="POST"){throw"the type should be GET or POST"}var a={"Content-Type":"application/json"};if(n){for(var r in n){if(n.hasOwnProperty(r)){a[r]=n[r]}}}var o={method:t,headers:a};if(i){o.body=i?JSON.stringify(i):{}}var s=await fetch(e,o);var l=await s.text();var c=JSON.parse(l);if(s.status!==200&&s.status!==201){throw c.error}return c};this.node=function(t,e,i){var n=document.createElement(t);if(e&&typeof e==="object"&&Array.isArray(e)&&e.length>0){e.forEach(function(t){n.classList.add(t)})}else if(e&&typeof e==="string"){var a=e.split(" ");a.forEach(function(t){n.classList.add(t)})}else if(e&&typeof e==="object"){i=e}if(i&&typeof i==="object"){for(var r in i){if(i.hasOwnProperty(r)){switch(r){case"text":n.textContent=i[r];break;case"html":n.innerHTML=i[r];break;case"classes":i[r].forEach(function(t){n.classList.add(t)});break;case"class":n.classList.add(i[r]);break;case"background":n.style.background=i[r];break;case"color":n.style.color=i[r];break;case"parent":i[r].appendChild(n);break;case"click":n.addEventListener("click",i[r]);break;case"touchstart":n.addEventListener("touchstart",i[r]);break;case"hover":n.addEventListener("hover",i[r]);break;case"change":n.addEventListener("change",i[r]);break;case"focus":n.addEventListener("focus",i[r]);break;case"mouseenter":n.addEventListener("mouseenter",i[r]);break;case"scroll":n.addEventListener("scroll",i[r]);break;case"input":n.addEventListener("input",i[r]);break;case"value":n.value=i[r];break;case"animate":setTimeout(function(){for(var t in i[r]){if(i[r].hasOwnProperty(r)){if(t==="ms"){continue}n.style[t]=i[r][t]}}},i[r].ms);break;default:n.setAttribute(r,i[r])}}}}return n};this.shortenNb=function(t){var e=1;var i=parseInt(t);var n=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"},{value:1e9,symbol:"B"}];var a=/\.0+$|(\.[0-9]*[1-9])0+$/;var r=0;for(r=n.length-1;r>0;r--){if(i>=n[r].value){break}}return(i/n[r].value).toFixed(e).replace(a,"$1")+n[r].symbol}}function ProgressierData(t){var e=this;this.params=null;this.parent=t;this.id=e.parent.appId;this.domain=function(){return e.parent.fetchdomain};this.version=1;this.downloadDetails=async function(){if(e.params){return}var t=await e.parent.utils.lets("GET",e.domain()+"/client/get-app?version="+e.version+"&id="+e.id);e.params=t.app;if(!e.params.whitelabel){console.log("%cThis awesome PWA is powered by Progressier (progressier.com)","background:#00ffd8; font-size:18px; text-align:center; font-weight:600")}};this.waitForData=function(){return new Promise(function(t,i){var n=setInterval(function(){if(!e.params||!e.params.name){return}clearInterval(n);return t(e.params)},100)})};this.get=async function(t){if(e.params){return e.params[t]}await e.waitForData();return e.params[t]};this.init=async function(){try{await e.downloadDetails()}catch(t){console.log(t)}};this.init()}function ProgressierCookies(){var t=this;t.set=function(t,e,i){var n=new Date;n.setTime(n.getTime()+i*24*60*60*1e3);var a="expires="+n.toUTCString();document.cookie=t+"="+e+";"+a+";path=/"};t.get=function(t){var e=t+"=";var i=decodeURIComponent(document.cookie);var n=i.split(";");for(var a=0;a<n.length;a++){var r=n[a];while(r.charAt(0)==" "){r=r.substring(1)}if(r.indexOf(e)==0){return r.substring(e.length,r.length)}}return""}}function ProgressierPushNotifications(t){var e=this;this.parent=t;this.permitted=false;this.subscription="";this.options={userVisibleOnly:true,applicationServerKey:e.parent.utils.urlBase64ToUint8Array("BMgdnVPoufKLyzqer3aIea4xPFPupfeH2ijPBT6we2Wl18wgH82geOPMBWP5QBxn-MEX7MeTfQ6FCE20pn5qxwQ")};this.requestPermission=function(){return new Promise(function(t,e){var i=Notification.requestPermission(function(e){t(e)});if(i){i.then(t,e)}}).then(function(t){if(t==="granted"){e.permitted=true}})};this.isCompatible=async function(){try{e.subscription=await e.parent.sw.reg.pushManager.getSubscription();return e.subscription?false:true}catch(t){return false}};this.isReady=async function(){try{await e.parent.sw.ready();return true}catch(t){return false}};this.eligible=async function(){if(e.parent.native.isIOS()){return}var t=await e.isReady();if(!t){return false}var i=await e.isCompatible();if(!i){return false}var n=await e.isSubscribed();if(n){return false}var a=await e.isDenied();if(a){return false}return true};this.isSubscribed=async function(){try{await e.isReady();e.subscription=await e.parent.sw.reg.pushManager.getSubscription();return e.subscription?true:false}catch(t){return false}};this.isDenied=async function(){if(!window.Notification){return false}return Notification.permission==="denied"?true:false};this.subscribeToPush=async function(){try{if(!e.permitted){return}await e.parent.sw.ready();if(!e.parent.sw.reg||!e.parent.sw.reg.pushManager){return}e.subscription=await e.parent.sw.reg.pushManager.subscribe(e.options);e.parent.user.registerPushSubscription(JSON.stringify(e.subscription));try{progressier.toolbox.toolbox.postPushApproved()}catch(t){}}catch(t){console.log(t)}};this.prompt=async function(){if(!("serviceWorker"in navigator)){return}if(!("PushManager"in window)){return}if(!("Notification"in window)){return}await e.requestPermission();await e.subscribeToPush();console.log(e.permitted?"This user is subscribed to push notifications":"This user has blocked push notifications")};this.autoPrompt=async function(){if(window.location.href.includes("push=autoprompt")){await e.prompt()}};this.init=async function(){try{if(!("serviceWorker"in navigator)){return}if(!("PushManager"in window)){return}if(!("Notification"in window)){return}await e.isReady();if(!window.Notification){return}var t=Notification.permission;if(t==="denied"){e.parent.user.cancelPushSubscription()}else if(t==="granted"){var i=await e.parent.sw.reg.pushManager.getSubscription();if(i){return}e.permitted=true;await e.subscribeToPush()}e.autoPrompt()}catch(n){}};e.init()}function ProgressierUser(t){var e=this;this.id=null;this.parent=t;this.appId=function(){return e.parent.data.id};this.cookieName="_user_"+e.appId();this.domain=function(){return e.parent.fetchdomain};this.add=async function(t){try{if(typeof t!=="object"){throw"The first argument must be a valid Javascript object"}t.progressier_id=e.id||null;var i=await e.parent.utils.lets("POST",e.domain()+"/endusers/save?id="+e.appId(),t);e.saveId(i.result)}catch(n){console.log(n)}};this.registerPushSubscription=function(t){progressier.analytics.registerPushSubscription();e.add({push_subscribed:true,push_subscription:t})};this.cancelPushSubscription=function(t){e.add({push_subscribed:false,push_subscription:""})};this.registerInstall=function(){e.add({app_installed:true})};this.retrieve=function(){var t=e.parent.cookies.get(e.cookieName);if(!t){return}e.id=t;e.add({last_seen:true})};this.saveId=function(t){e.id=t;e.parent.cookies.set(e.cookieName,e.id,8e3)};e.retrieve()}function ProgressierNative(t){var e=this;this.parent=t;this.prompt=null;this.installed=false;this.installable=false;this.justInstalled=false;this.standalone=false;this.iOScompatible=false;this.compatible=false;this.appId=function(){return e.parent.data.id};this.cookieName=function(){return"progressierapp"+e.appId()};this.compatibleNotCompatibleOrUnknown=function(){if(e.installed){return false}if(e.standalone){return false}if(e.installable){return true}if(e.iOScompatible){return true}return null};this.waitUntilReady=function(){return new Promise(function(t,i){e.waitingTimer=setInterval(function(){var i=e.compatibleNotCompatibleOrUnknown();if(i===null){return}if(i===false){clearInterval(e.waitingTimer);return t(false)}if(i===true){clearInterval(e.waitingTimer);return t(true)}},500)})};this.markCompatible=function(){if(e.compatible){return}e.compatible=true;if(progressier&&progressier.analytics){progressier.analytics.registerCompatibleView()}};this.markInstalled=function(){if(e.installed){return}e.installed=true;if(progressier&&progressier.analytics){progressier.analytics.registerInstalledView()}};this.markStandAlone=function(){e.standalone=true;e.installable=false;e.installed=true;e.markCompatible()};this.checkIfStandalone=function(){window.addEventListener("DOMContentLoaded",function(){if(navigator.standalone||window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: fullscreen)").matches||window.matchMedia("(display-mode: minimal-ui)").matches){e.markStandAlone()}});window.addEventListener("DOMContentLoaded",function(){window.matchMedia("(display-mode: standalone)").addListener(function(t){if(t.matches){e.markStandAlone()}});window.matchMedia("(display-mode: fullscreen)").addListener(function(t){if(t.matches){e.markStandAlone()}});window.matchMedia("(display-mode: minimal-ui)").addListener(function(t){if(t.matches){e.markStandAlone()}})})};this.getInstallCookie=function(){var t=e.parent.cookies.get(e.cookieName());return t==="installed"?true:false};this.saveInstallCookie=function(){e.parent.cookies.set(e.cookieName(),"installed",9999)};this.resetInstallCookie=function(){e.parent.cookies.set(e.cookieName(),null,9999)};this.onInstallPrompt=function(t){if(e.parent.debug()){console.log(t)}if(e.justInstalled){return}t.preventDefault();e.installed=false;e.installable=true;e.markCompatible();e.prompt=t;e.resetInstallCookie()};this.detectInstallPrompt=function(){if(e.parent.nativePrompt){e.onInstallPrompt(e.parent.nativePrompt)}window.addEventListener("beforeinstallprompt",function(t){e.onInstallPrompt(t)})};this.listenToAppInstallSuccess=function(){window.addEventListener("appinstalled",async function(t){e.postInstall()})};this.detectIfAlreadyInstalled=async function(){if("getInstalledRelatedApps"in window.navigator){var t=await navigator.getInstalledRelatedApps();if(!t||t.length<0){e.installed=false}t.forEach(function(t){if(t&&t.url){e.markInstalled();e.markCompatible()}})}var i=e.getInstallCookie();if(i&&!e.prompt){e.markInstalled();e.installable=false;e.markCompatible()}};this.checkIfServiceWorkerSupported=function(){if(!("serviceWorker"in navigator)){e.makeIncompatible()}};this.isIOS=function(){var t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];return t.includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document};this.isSafari=function(){return navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&navigator.userAgent.indexOf("CriOS")==-1&&navigator.userAgent.indexOf("FxiOS")==-1};this.checkIfIsIOSCompatible=function(){if(!e.isIOS()){return}if(!e.isSafari()){return}e.iOScompatible=true};this.makeIncompatible=function(){e.installed=false;e.installable=false;e.standalone=false;e.compatible=false};this.register=function(){e.checkIfIsIOSCompatible();e.checkIfServiceWorkerSupported();e.detectIfAlreadyInstalled();e.checkIfStandalone();e.detectInstallPrompt();e.listenToAppInstallSuccess();e.captureIOSPostInstall()};this.install=function(){return new Promise(function(t,i){if(!e.installable){return i("The app may already be installed or your browser may not support this function")}var n=document.querySelector("body");n.addEventListener("click",async function(){var i=await e.oninstall();return t(i)},{once:true});n.dispatchEvent(new Event("click"))})};this.promote=async function(){try{await e.install()}catch(t){console.log(t)}};this.postInstall=function(t){e.installable=false;e.justInstalled=true;e.markInstalled();e.parent.analytics.registerInstall();e.parent.user.registerInstall();e.markCompatible();e.saveInstallCookie();if(t){return}try{progressier.toolbox.toolbox.postInstall()}catch(i){}};this.captureIOSPostInstall=function(){if(!e.isIOS()){return}if(!e.isSafari()){return}if(!e.standalone){return}if(e.getInstallCookie()){return}e.postInstall(true)};this.oninstall=async function(t){if(!e.prompt){return false}e.prompt.prompt();var i=await e.prompt.userChoice;if(i&&i.outcome==="accepted"){e.postInstall();return true}else{e.installed=false;e.markCompatible();return false}};e.register()}function ProgressierInstallButtons(t){var e=this;this.parent=t;this.native=e.parent.native;this.className="progressier-install-button";this.captured="captured";this.timing=150;this.timer=null;this.buttons=[];this.newButton=function(t){t.classList.add(e.captured);e.buttons.push(new ProgressierInstallButton(t,e))};this.search=function(){document.querySelectorAll(`.`+e.className+`:not(.`+e.captured+`)`).forEach(function(t){e.newButton(t)})};this.init=function(){e.timer=setInterval(e.search,e.timing)};this.init()}function ProgressierInstallButton(t,e){var i=this;this.node=t;this.parent=e;this.native=i.parent.parent.native;this.registerButtonClick=function(){i.parent.parent.analytics.registerButtonClick()};this.disabled=true;this.status="";this.timer=null;this.timing=400;this.datapoints=[{db:"installBtnBehavior",html:"data-behavior",def:function(){return"disable"}},{db:"allowIOS",html:"data-allow-ios",def:function(){return false}},{db:"installBtnWording",html:"data-install",standard:"Install",def:function(){return i.parent.parent.wording.get("install")}},{db:"installedBtnWording",html:"data-installed",standard:"Installed",def:function(){return i.parent.parent.wording.get("installed")}},{db:"installBtnIcons",html:"data-icons",def:function(){return false}}];this.data=function(){var t={};i.datapoints.forEach(function(e){var n=i.node.getAttribute(e.html)||e.def();if(i.node.getAttribute(e.html)===e.standard){n=e.def()}if(n==="false"){n=false}t[e.db]=n});return t};this.install=async function(){i.registerButtonClick();progressier.install()};this.addInstallBehavior=function(){i.node.addEventListener("click",i.install)};this.remove=function(){if(i.node){i.node.remove()}clearInterval(i.timer)};this.disable=function(){i.node.style["pointer-events"]="none";i.node.style.opacity="0.4"};this.enable=function(){i.node.style["pointer-events"]="auto";i.node.style.opacity="1"};this.hide=function(){i.node.style.display="none"};this.show=function(){i.node.style.display=""};this.update=function(){if(!i.node){i.remove();return}var t=i.data();var e=!i.native.compatible||!i.native.installable&&!i.native.installed&&!i.native.standalone||t.installBtnBehavior==="hide"&&(i.native.installed||i.native.standalone);if(t.allowIOS&&i.native.iOScompatible&&(!i.native.installed&&!i.native.standalone)){e=false}if(e){i.hide()}else{i.show()}var n=i.native.installable||t.allowIOS&&i.native.iOScompatible;if(n){i.enable()}else{i.disable()}i.disabled=n?false:true;var a="",r="";var o=i.parent.parent.utils.svg_check();var s=i.parent.parent.utils.svg_plus();var l="default";if(i.native.standalone||i.native.installed||!i.native.installable&&(!t.allowIOS||!i.native.iOScompatible)){r=o;a=t.installedBtnWording;l="installed"}else{r=s;a=t.installBtnWording;l="default"}if(l!==i.status){var c=`<span style="display:flex;justify-content:center;align-items:center;height:100%;">`;if(t.installBtnIcons){c+=`<span style="object-fit:contain;display:flex;justify-content:center;align-items:center;width:20px;height:20px;margin-right:15px;">`+r+`</span>`}c+=`<span>`+a+`</span>`;c+=`</span>`;i.node.innerHTML=c}i.status=l};this.startTimer=function(){i.timer=setInterval(i.update,i.timing)};this.init=async function(){i.hide();i.addInstallBehavior();i.startTimer()};this.init()}function ProgressierEngagement(t){var e=this;this.parent=t;this.rules=[];this.timer=null;this.startDate=new Date;this.shown=false;this.appId=function(){return e.parent.data.id};this.minBetweenVisits=1e3*60*60*2;this.visitNbCookie=function(){return"progressiervisit"+e.appId()};this.lastVisitCookie=function(){return"progressierlast"+e.appId()};this.declinedCookie=function(){return"progressierdeclined"+e.appId()};this.getLastVisitDate=function(){var t=e.parent.cookies.get(e.lastVisitCookie());if(!t){return null}var i=new Date(t).getTime();if(!i||isNaN(i)){return null}return i};this.setLastVisitDate=function(){var t=(new Date).toISOString();e.parent.cookies.set(e.lastVisitCookie(),t,9999)};this.getVisitNb=function(){var t=e.parent.cookies.get(e.visitNbCookie());var i=parseInt(t);if(isNaN(i)){return 0}return i};this.incrementVisitNb=function(){var t=e.getVisitNb()||0;var i=e.getLastVisitDate();var n=!i||typeof i!=="number"?true:false;var a=n?0:(new Date).getTime()-i;if(!n&&a<e.minBetweenVisits){return}var r=t+1;e.parent.cookies.set(e.visitNbCookie(),r,9999)};this.everyXVisits=function(t){var i=e.getVisitNb()||0;if(!i){return false}if(i%t===0){return true}return false};this.visitsMore=function(t){var i=e.getVisitNb()||0;var n=parseInt(t);if(!n||isNaN(n)){return false}if(i>n){return true}return false};this.setDecline=function(){var t=(new Date).toISOString();e.parent.cookies.set(e.declinedCookie(),t,9999)};this.declinedHours=function(t){var i=parseInt(t);if(isNaN(i)){return false}var n=e.parent.cookies.get(e.declinedCookie());if(!n){return true}var a=new Date(n).getTime();if(isNaN(a)){return false}var r=(new Date).getTime()-a;var o=r/1e3/60/60;if(o>t){return true}return false};this.timeSpent=function(t){if(!e.startDate){return false}if(!t){return false}var i=parseInt(t);if(isNaN(i)){return false}var n=new Date;var a=n.getTime()-e.startDate.getTime();var r=a/1e3;return r>i};this.isInstalled=function(){return e.parent.native.installable};this.canSubscribe=function(){return true};this.launch=async function(){if(e.shown){return}e.shown=true;try{e.parent.toolbox.toolbox.promoteSomething()}catch(t){}};this.apply=async function(){var t=0;e.rules.forEach(function(e){e.verified=e.fn(e.val);if(e.verified){t+=1}});if(t===e.rules.length){e.launch()}};this.rules=[{val:3,fn:e.visitsMore,verified:false},{val:3,fn:e.everyXVisits,verified:false},{val:24*3,fn:e.declinedHours,verified:false},{val:10,fn:e.timeSpent,verified:false}];this.init=async function(){e.apply();e.timer=setInterval(e.apply,1e3);e.incrementVisitNb();e.setLastVisitDate()};e.init()}function ProgressierSw(t){var e=this;this.parent=t;this.reg=null;this.sw=async function(){var t=await e.parent.data.get("swUrl")||"progressier.js";return window.location.origin+"/"+t};this.register=async function(){var t=await e.sw();try{var i=await navigator.serviceWorker.register(t);e.reg=i}catch(n){console.log("The Progressier script works fine. But we were not able to register your service worker. Are you sure you've uploaded it to "+t+"?")}};this.ready=function(){return new Promise(function(t,i){var n=setInterval(function(){if(!e.reg){return}clearInterval(n);return t()},200)})};this.listenToMessage=async function(){navigator.serviceWorker.onmessage=function(t){console.log(t)}};this.waitTillReady=async function(){await navigator.serviceWorker.ready};this.init=async function(){if("serviceWorker"in navigator!==true){return}await e.register();await e.waitTillReady();await e.listenToMessage()};e.init()}
